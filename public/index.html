<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Together | Watch Together</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Login Ekranƒ± -->
        <div class="login-screen" id="loginScreen">
            <div class="login-box">
                <div class="logo">
                    <span class="logo-icon">üê±</span>
                    <h1>Together</h1>
                </div>
                
                <div class="login-form">
                    <input type="text" id="usernameInput" placeholder="ƒ∞sim" maxlength="20">
                    <input type="text" id="roomIdInput" placeholder="Oda kodu" maxlength="30">
                    <button onclick="joinRoom()">Katƒ±l</button>
                </div>
            </div>
        </div>

        <!-- Ana Ekran -->
        <div class="main-screen" id="mainScreen">
            <!-- Video B√∂l√ºm√º -->
            <div class="video-section">
                <!-- Ba≈ülƒ±k -->
                <div class="top-bar">
                    <div class="room-info">
                        <span>üê±</span>
                        <span id="currentRoom"></span>
                    </div>
                </div>

                <!-- Kontroller -->
                <div class="controls">
                    <button id="screenShareBtn" onclick="toggleScreenShare()">
                        <span class="btn-icon">üì∫</span>
                        <span class="btn-text">Ekran Payla≈ü</span>
                    </button>
                    <button id="micBtn" onclick="toggleMicrophone()">
                        <span class="btn-icon">üîá</span>
                        <span class="btn-text">Mikrofon</span>
                    </button>
                    <button id="cameraBtn" onclick="toggleCamera()">
                        <span class="btn-icon">üì∑</span>
                        <span class="btn-text">Kamera</span>
                    </button>
                    <button class="sync-btn" onclick="requestSync()">
                        <span class="btn-icon">‚è±Ô∏è</span>
                        <span class="btn-text">3-2-1 Ba≈üla</span>
                    </button>
                </div>

                <!-- Mikrofon Gain Slider -->
                <div class="mic-gain-control">
                    <span class="gain-label">üé§ Mikrofon Seviyesi</span>
                    <input type="range" id="micGainSlider" min="0" max="100" value="100" onchange="changeMicGain(this.value)">
                    <span id="micGainValue" class="gain-value">100</span>
                </div>

                <!-- Remote Video Container (Ekran Payla≈üƒ±mƒ± / Kamera - ANA ALAN) -->
                <div id="remoteVideoContainer" class="remote-container" style="display: none;">
                    <div class="stream-badge">
                        <span class="live-dot"></span>
                        <span>Yayƒ±n</span>
                    </div>
                    <video id="remoteVideo" autoplay playsinline></video>
                    <audio id="remoteAudio" autoplay></audio>
                    
                    <!-- Video Kontrolleri -->
                    <div class="video-controls-overlay">
                        <button onclick="toggleFullscreen()" class="ctrl-btn" title="Tam Ekran">
                            <span>‚õ∂</span>
                        </button>
                        <div class="volume-control">
                            <span>üîä</span>
                            <input type="range" min="0" max="100" value="100" onchange="changeVolume(this.value)">
                            <span id="volumeValue">100</span>
                        </div>
                    </div>
                </div>

                <!-- Video Player Section -->
                <div id="videoPlayerSection" class="player-section">
                    <div class="video-input">
                        <input type="text" id="videoUrlInput" placeholder="Video URL (YouTube, Vimeo, MP4)">
                        <button onclick="loadVideo()">‚ñ∂</button>
                    </div>

                    <div class="video-player">
                        <div class="video-placeholder" id="placeholder">
                            <div class="placeholder-content">
                                <span class="placeholder-icon">üê±</span>
                                <p>Video y√ºkle veya ekran payla≈ü</p>
                            </div>
                        </div>
                        <video id="videoPlayer" controls style="display: none;"></video>
                    </div>
                </div>

                <!-- Sadece Kamera √ñnizlemesi (K√º√ß√ºk Pencere) -->
                <video id="localCameraPreview" class="local-preview" autoplay muted playsinline style="display: none;"></video>
            </div>

            <!-- Chat B√∂l√ºm√º -->
            <div class="chat-section">
                <div class="chat-header">
                    <h3>Sohbet</h3>
                    <div class="users-count" id="usersList">
                        üê± 0
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        Odaya ho≈ü geldin üê±
                    </div>
                </div>

                <div class="chat-input">
                    <input type="text" id="messageInput" placeholder="Mesaj..." onkeypress="handleMessageKeypress(event)">
                    <button onclick="sendMessage()">‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>
